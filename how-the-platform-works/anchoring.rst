.. _anchoring:

Анкоринг
================
В приватном блокчейне обработка транзакций выполняется строго определенным списком участников, каждый из которых заранее известен.
Малое, по сравнению с публичным, количество участников, блоков и транзакций в приватном блокчейне несёт угрозу подмены информации.
Переподпись цепочки блоков и транзакций, особенно в случае использования PoS консенсуса, становится реальной.

Для повышения доверия участников приватного блокчейна к размещенным в блокчейне данным разработан механизм анкоринга.
Анкоринг — это механизм, позволяющий проверить данные на неизменность. Гарантия неизменности достигается публикацией данных из приватного блокчейна в в более крупную сеть,
где подмена данных маловероятна из-за большего количества участников и блоков. Публикуемые данные — хэш от блоков приватной сети.

Анкоринг работает следующим образом:

#. В конфигурационном файле указывается период анкоринга, например раз в 10 блоков, раз в 100 блоков.
#. При достижении приватным блокчейном задачнной высоты в основной сети создается транзакция с данными. Данные содержат хеш блока приватной сети и его высоту.
#. Нода приватной сети дожидается подтверждения успешной записи транзакции от основной сети, и получает идентификатор этой транзакции с данными.
#. Затем, в приватной сети публикуется такая же транзакция с данными, дополнительно содержащая идентификатор этой транзакции в основной сети.

Так мы получаем возможность проверить данные на подлог или неизменность в результате `long-range атаки <https://medium.com/@abhisharm/understanding-proof-of-stake-through-its-flaws-part-3-long-range-attacks-672a3d413501/>`_ .
