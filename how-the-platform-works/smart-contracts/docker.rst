.. _docker:

Cмарт-контракты Docker
=======================================

В дополнение к контрактам, реализованным на базе :ref:`скриптов RIDE <ride>` для смарт-аккаунтов и смарт-ассетов, платформа Vostok предоставляет возможность разработки 
и использования Тьюринг-полных смарт-контрактов.
Для реализации Тьюринг-полных контрактов выбран подход, в котором программы запускаются в изолированной среде докер-контейнера. 
При этом разработка приложений может выполняться без ограничений на используемый язык программирования.  
Доступ к состоянию выполняется через API ноды. Для хранения смарт-контрактов используется локальный докер-репозиторий (Docker Registry) с доступом для деплоя и чтения для машин с нодами.

.. image:: ../img/docker-1.png
    :scale: 80%
    :align: right

Создание смарт-контракта
--------------------------

Установка смарт-контракта в блокчейн реализуется через публикацию специальной транзакции, содержащей ссылку на docker образ в локальном репозитории. 
В этом процессе docker образ проверяется и запускается. Образ после загрузки запускается в виде docker контейнера с приложением на каждой ноде.


Исполнение смарт-контракта
-----------------------------

Исполнение смарт-контрактов инициируется специальной транзакцией, в которой содержатся идентификатор контракта и параметры для его вызова.
Смарт-контракты изменяют своё состояние через обновление пар ключ - значение (как и транзакции с данными).
Каждое приложение запускается в докер-контейнере для возможности изоляции и управления ресурсами, доступными конкретному приложению. 


Примеры реализации
-----------------------------

:ref:`Создание простого контракта <first-contract-tutorial>`
